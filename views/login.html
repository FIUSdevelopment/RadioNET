<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../static/css/materialize.css"  media="screen,projection"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body onload="getAdminLink()">
    <nav>
      <div class="nav-wrapper">
        <a href="#" class="brand-logo center">Logo</a>
        <ul id="nav-mobile" class="left hide-on-med-and-down">
          <li id="AdminLink"></li>
          <li><a href="/listen">Ascolta</a></li>
        </ul>
      </div>
    </nav>
    <div class="container">
      <h1 class="title" style="text-align: center">RadioNet - Login</h1><br>
      <p id="description" style="text-align: center">Esegui il login per accedere alla dashboard e caricare musica.</p><br>
      <div class="row">
        <p id="form-align" style="text-align: center"><form class="col s12 login-form">
          <div class="row">
            <div class="col s3"></div>
            <div class="input-field col s6">
              <input placeholder="Username" id="username" type="text" class="validate">
              <label for="username">Username</label>
            </div>
          </div>
          <form class="col s12">
            <div class="row">
              <div class="col s3"></div>
              <div class="input-field col s6">
                <input id="password" placeholder="Password" type="text" class="validate">
                <label for="password">Password</label>
              </div>
            </div>
        </form></p>
      </div>
      <p style="text-align: center"><button class="waves-effect waves-light btn-small listen-button" id="LoginButton" onclick="login()">Esegui il login</button></p>
    </div>
    <script type="text/javascript" src="../static/js/materialize.js"></script>
    <footer class="page-footer foot">
      <div class="container foot-container">
        <div class="row">
          <div class="col l6 s12">
            <h5 class="white-text">RadioNet</h5>
          </div>
          <div class="col l4 offset-l2 s12">
            <h5 class="white-text">Links</h5>
            <ul>
              <li><a class="grey-text text-lighten-3" href="https://github.com/BlackdestinyXX">Bl4ckdestinyXX</a></li>
              <li><a class="grey-text text-lighten-3" href="https://discord.gg/nmuNC4gJtD">FIUS</a></li>
              <li><a class="grey-text text-lighten-3" href="https://fius.online">FIUS Website</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
        Â© 2021 Copyright FIUS
        </div>
      </div>
    </footer>
    <script>
      function getAdminLink() {
        if(localStorage.getItem("username") && localStorage.getItem("password")) {
          document.getElementById("AdminLink").innerHTML = `<a href="/dashboard">Admin Dashboard</a>`
        } else {
          document.getElementById("AdminLink").innerHTML = `<a href="/login">Login</a>`
        }
      }
      function login() {
        let usr = document.getElementById("username").value
        let psw = document.getElementById("password").value

        if(usr == "" || usr == undefined || usr == null || psw == "" || psw == undefined || usr == null) {
          alert("Devi compilare tutti i campi!")
        } else {
          fetch("/checkusr", {
            method: 'POST',
            body: {
              "usr": usr,
              "psw": psw
            }
          }).then(response => console.log(response))
          console.log("username: " + usr + "\npassword: " + psw)
        }
      }
    </script>
  </body>
</html>